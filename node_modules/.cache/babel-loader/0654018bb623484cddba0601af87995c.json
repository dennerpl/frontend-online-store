{"ast":null,"code":"import _toConsumableArray from\"/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import*as api from'../services/api';import{addProductInLocalStorage,recoveryProductsFromLocalStorage}from'../services/cartFunctions';import SearchBar from'../components/SearchBar';import FilteredProductsList from'../components/FilteredProductsList';import ListCategory from'../components/ListCategory';import Footer from'../components/Footer';var ProductsList=/*#__PURE__*/function(_Component){_inherits(ProductsList,_Component);var _super=_createSuper(ProductsList);function ProductsList(){var _this;_classCallCheck(this,ProductsList);_this=_super.call(this);_this.state={productsToRender:[],inputSearchValue:'',shoppingCartItems:[]};_this.fetchByQuery=_this.fetchByQuery.bind(_assertThisInitialized(_this));_this.updateInputSearch=_this.updateInputSearch.bind(_assertThisInitialized(_this));_this.addShoppingCartItems=_this.addShoppingCartItems.bind(_assertThisInitialized(_this));_this.fetchByCategory=_this.fetchByCategory.bind(_assertThisInitialized(_this));_this.onClickCategory=_this.onClickCategory.bind(_assertThisInitialized(_this));return _this;}_createClass(ProductsList,[{key:\"componentDidMount\",value:function componentDidMount(){recoveryProductsFromLocalStorage();}},{key:\"onClickCategory\",value:function(){var _onClickCategory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var target,categoryId,inputSearchValue,fetchWithCategoryAndQuery;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:target=event.target;categoryId=target.id;inputSearchValue=this.state.inputSearchValue;_context.next=5;return api.getProductsFromCategoryAndQuery(categoryId,inputSearchValue);case 5:fetchWithCategoryAndQuery=_context.sent;this.setState({productsToRender:fetchWithCategoryAndQuery.results});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function onClickCategory(_x){return _onClickCategory.apply(this,arguments);}return onClickCategory;}()},{key:\"fetchByQuery\",value:function(){var _fetchByQuery=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var inputSearchValue,fetchResult;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:inputSearchValue=this.state.inputSearchValue;_context2.next=3;return api.getProductsFromCategoryAndQuery(false,inputSearchValue);case 3:fetchResult=_context2.sent;this.setState({productsToRender:fetchResult.results});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function fetchByQuery(){return _fetchByQuery.apply(this,arguments);}return fetchByQuery;}()},{key:\"fetchByCategory\",value:function(){var _fetchByCategory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(categoryId){var inputSearchValue,fetchWithCategoryAndQuery;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:inputSearchValue=this.state.inputSearchValue;_context3.next=3;return api.getProductsFromCategoryAndQuery(categoryId,inputSearchValue);case 3:fetchWithCategoryAndQuery=_context3.sent;this.setState({productsToRender:fetchWithCategoryAndQuery.results});case 5:case\"end\":return _context3.stop();}}},_callee3,this);}));function fetchByCategory(_x2){return _fetchByCategory.apply(this,arguments);}return fetchByCategory;}()},{key:\"updateInputSearch\",value:function updateInputSearch(event){var target=event.target;this.setState({inputSearchValue:target.value});}},{key:\"addShoppingCartItems\",value:function addShoppingCartItems(event){var _this2=this;var oldList=recoveryProductsFromLocalStorage();this.setState({shoppingCartItems:oldList});var target=event.target;var id=target.id;var productsToRender=this.state.productsToRender;var newItem=productsToRender.filter(function(product){return product.id===id;});this.setState(function(previousState){return{shoppingCartItems:[].concat(_toConsumableArray(previousState.shoppingCartItems),[newItem[0]])};},function(){var shoppingCartItems=_this2.state.shoppingCartItems;addProductInLocalStorage(shoppingCartItems);});}},{key:\"render\",value:function render(){var _this$state=this.state,productsToRender=_this$state.productsToRender,inputSearchValue=_this$state.inputSearchValue;return/*#__PURE__*/React.createElement(\"div\",{className:\"main-search\"},/*#__PURE__*/React.createElement(\"section\",{className:\"main-search-container\"},/*#__PURE__*/React.createElement(SearchBar,{onSearch:this.fetchByQuery,inputValue:inputSearchValue,inputChange:this.updateInputSearch})),/*#__PURE__*/React.createElement(\"section\",{className:\"main-category-container\"},/*#__PURE__*/React.createElement(ListCategory,{onClickCategory:this.onClickCategory}),/*#__PURE__*/React.createElement(FilteredProductsList,{allProducts:productsToRender,addShoppingCartItems:this.addShoppingCartItems})),/*#__PURE__*/React.createElement(Footer,null));}}]);return ProductsList;}(Component);export default ProductsList;","map":{"version":3,"sources":["/home/denner/Documentos/WebDevelopment/trybe-projects/project-frontend-online-store/sd-07-project-frontend-online-store/src/pages/ProductsList.js"],"names":["React","Component","api","addProductInLocalStorage","recoveryProductsFromLocalStorage","SearchBar","FilteredProductsList","ListCategory","Footer","ProductsList","state","productsToRender","inputSearchValue","shoppingCartItems","fetchByQuery","bind","updateInputSearch","addShoppingCartItems","fetchByCategory","onClickCategory","event","target","categoryId","id","getProductsFromCategoryAndQuery","fetchWithCategoryAndQuery","setState","results","fetchResult","value","oldList","newItem","filter","product","previousState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as api from '../services/api';\nimport {\n  addProductInLocalStorage,\n  recoveryProductsFromLocalStorage,\n} from '../services/cartFunctions';\nimport SearchBar from '../components/SearchBar';\nimport FilteredProductsList from '../components/FilteredProductsList';\nimport ListCategory from '../components/ListCategory';\nimport Footer from '../components/Footer';\n\nclass ProductsList extends Component {\n  constructor() {\n    super();\n    this.state = {\n      productsToRender: [],\n      inputSearchValue: '',\n      shoppingCartItems: [],\n    };\n    this.fetchByQuery = this.fetchByQuery.bind(this);\n    this.updateInputSearch = this.updateInputSearch.bind(this);\n    this.addShoppingCartItems = this.addShoppingCartItems.bind(this);\n    this.fetchByCategory = this.fetchByCategory.bind(this);\n    this.onClickCategory = this.onClickCategory.bind(this);\n  }\n\n  componentDidMount() {\n    recoveryProductsFromLocalStorage();\n  }\n\n  async onClickCategory(event) {\n    const { target } = event;\n    const categoryId = target.id;\n    const { inputSearchValue } = this.state;\n    const fetchWithCategoryAndQuery = await api.getProductsFromCategoryAndQuery(\n      categoryId,\n      inputSearchValue,\n    );\n    this.setState({\n      productsToRender: fetchWithCategoryAndQuery.results,\n    });\n  }\n\n  async fetchByQuery() {\n    const { inputSearchValue } = this.state;\n    const fetchResult = await api.getProductsFromCategoryAndQuery(\n      false,\n      inputSearchValue,\n    );\n    this.setState({\n      productsToRender: fetchResult.results,\n    });\n  }\n\n  async fetchByCategory(categoryId) {\n    const { inputSearchValue } = this.state;\n    const fetchWithCategoryAndQuery = await api.getProductsFromCategoryAndQuery(\n      categoryId,\n      inputSearchValue,\n    );\n    this.setState({\n      productsToRender: fetchWithCategoryAndQuery.results,\n    });\n  }\n\n  updateInputSearch(event) {\n    const { target } = event;\n    this.setState({\n      inputSearchValue: target.value,\n    });\n  }\n\n  addShoppingCartItems(event) {\n    const oldList = recoveryProductsFromLocalStorage();\n    this.setState({\n      shoppingCartItems: oldList,\n    });\n    const { target } = event;\n    const { id } = target;\n    const { productsToRender } = this.state;\n    const newItem = productsToRender.filter((product) => product.id === id);\n    this.setState((previousState) => ({\n      shoppingCartItems: [...previousState.shoppingCartItems, newItem[0]],\n    }), () => {\n      const { shoppingCartItems } = this.state;\n      addProductInLocalStorage(shoppingCartItems);\n    });\n  }\n\n  render() {\n    const { productsToRender, inputSearchValue } = this.state;\n    return (\n      <div className=\"main-search\">\n        <section className=\"main-search-container\">\n          <SearchBar\n            onSearch={ this.fetchByQuery }\n            inputValue={ inputSearchValue }\n            inputChange={ this.updateInputSearch }\n          />\n        </section>\n        <section className=\"main-category-container\">\n          <ListCategory onClickCategory={ this.onClickCategory } />\n          <FilteredProductsList\n            allProducts={ productsToRender }\n            addShoppingCartItems={ this.addShoppingCartItems }\n          />\n        </section>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default ProductsList;\n"]},"metadata":{},"sourceType":"module"}